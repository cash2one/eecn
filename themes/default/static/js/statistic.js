var BfbStatistic=function(e,t){function n(t){var n=e["statistic"+a.toUpperCaseFirst(t)+"Switcher"];return"undefined"==typeof n||n}var r=+new Date+":"+Math.floor(100*Math.random()),o={type:{defaults:"defaults",performance:"performance",churn_rate:"churn_rate",exception:"exception"},logid:r,url:"https://tongji.baifubao.com/page_performance/stat.jpg"},i=t.documentElement,a={tempImgList:[],createImg:function(n,r){var o=this.tempImgList,i=e.Image?new Image:t.createElement("img");o.push(i),r&&this.onload(i,r),i.src=n},each:function(e,t){for(var n in e){var r=e[n];t.call(r,n,r)}return e},extend:function(){var e,t,n,r,o,i,a=arguments[0]||{},c=1,s=arguments.length,f=!1;for("boolean"==typeof a&&(f=a,a=arguments[1]||{},c=2),"object"!=typeof a&&"function"===!this.type(a)&&(a={}),s===c&&(a=this,--c);s>c;c++)if(null!=(e=arguments[c]))for(t in e)n=a[t],r=e[t],a!==r&&(f&&r&&(this.isPlainObject(r)||(o=this.isArray(r)))?(o?(o=!1,i=n&&this.isArray(n)?n:[]):i=n&&this.isPlainObject(n)?n:{},a[t]=this.extend(f,i,r)):void 0!==r&&(a[t]=r));return a},isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},obj2str:function(e){var n=[];switch(!0){case"undefined"==typeof e:n="";break;case"string"==typeof e:n='"'+e.replace(/([\"\\])/g,"\\$1").replace(/(\n)/g,"\\n").replace(/(\r)/g,"\\r").replace(/(\t)/g,"\\t")+'"';break;case"object"==typeof e:if("[object Array]"===!Object.prototype.toString.call(e)){for(var r in e)n.push('"'+r+'":'+this.obj2str(e[r]));t.all&&!/^\n?function\s*toString\(\)\s*\{\n?\s*\[native code\]\n?\s*\}\n?\s*$/.test(e.toString())&&n.push("toString:"+e.toString.toString()),n="{"+n.join()+"}"}else{for(var o=0;o<e.length;o++)n.push(this.obj2str(e[o]));n="["+n.join()+"]"}break;default:n=e.toString().replace(/\"\:/g,'":""')}return n},on:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},onload:function(t,n){var r=!(!e.attachEvent||e.opera),o=!1,i=function(){o||(o=!0,t.onload=t.onerror=null,n&&n())};if(t.onload=t.onerror=function(){i()},r)var a=e.setInterval(function(){return o?void(a&&e.clearInterval(a)):void(("loaded"===t.readyState||"complete"===t.readyState)&&(a&&e.clearInterval(a),i()))},10)},param:function(e){var t=[];for(var n in e){var r=e[n];"undefined"!=typeof r&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}return t.join("&")},sendData:function(n,r){var i=e.statisticPageId;if(i){var c=a.extend({type:o.type.defaults,refer:t.referrer||"",pageId:i,clientTime:+new Date,logid:o.logid},n),s=o.url+"?"+a.param(c);s.length>2083&&(c.refer="",s=o.url+"?"+a.param(c)),a.createImg(s,r)}else r&&r()},toUpperCaseFirst:function(e){return e.replace(/(^|\s+)\w/g,function(e){return e.toUpperCase()})},type:function(e){var t={};return this.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,n){t["[object "+n+"]"]=n.toLowerCase()}),null==e?String(e):t[Object.prototype.toString.call(e)]||"object"}};a.contains=i.contains?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return"acode_btn"===t.id&&(window.element=t),e===r||!!(r&&1===r.nodeType&&n.contains&&n.contains(r))}:i.compareDocumentPosition?function(e,t){return t&&!!(16&e.compareDocumentPosition(t))}:function(e,t){for(;t=t.parentNode;)if(t===e)return!0;return!1};var c={init:function(){this.getStyleImgList(),this.getTagImgList(),this.bindDomReadyEvent(),this.bindEvent()},bindDomReadyEvent:function(){var n=this,r=!1,o=!(!e.attachEvent||e.opera),i=function(){r||(r=!0,n.domReadyEndTime=+new Date)};o?(!function(){try{t.documentElement.doScroll("left")}catch(e){return void setTimeout(arguments.callee,0)}i()}(),t.onreadystatechange=function(){"complete"==t.readyState&&(t.onreadystatechange=null,i())}):t.addEventListener("DOMContentLoaded",function(){i()},!1)},bindEvent:function(){var t=this;a.on(e,"load",function(){var n=e.statisticStartTime,r=t.domReadyEndTime,i={type:o.type.performance,whiteScreenTime:e.statisticWhiteScreenEndTime-n,firstScreenTime:(t.firstScreenEndTime||r)-n,domReadyTime:r-n,onloadTime:+new Date-n};a.sendData(i,null)})},bindImgOnloadEvent:function(e){var t=this,n="object"==typeof e?e.getAttribute("src"):e;if(n&&!(n.split("?").length>1)&&t.checkRepeat(n)){var r=function(){var e=+new Date;(!t.firstScreenEndTime||e>t.firstScreenEndTime)&&(t.firstScreenEndTime=e)};"object"==typeof e?a.onload(e,function(){t.checkIsInFirstScreen(e)&&r()}):a.createImg(n,r)}},checkIsInFirstScreen:function(e){var n=this.getClient(e);return n.left>=0&&n.left<(i.clientWidth||t.body.clientWidth)&&n.top>=0&&n.top<(i.clientHeight||t.body.clientHeight)},checkRepeat:function(e){for(var t=this.srcTempList=this.srcTempList||[],n=0,r=t.length;r>n;n++)if(t[n]===e)return!1;return t.push(e),!0},getClient:function(e){for(var n=e.offsetLeft,r=e.offsetTop,o=e.offsetParent;null!==o&&o!==t.body;)n+=o.offsetLeft,r+=o.offsetTop,o=o.offsetParent;return{left:n-(i.scrollLeft||t.body.scrollLeft),top:r-(i.scrollTop||t.body.scrollTop)}},getCurrentStyle:function(e,t){return e.currentStyle?e.currentStyle[t]:e.ownerDocument.defaultView.getComputedStyle(e,null)[t]},getStyleImgList:function(){for(var e=this,n=t.getElementsByTagName("*"),r=0,o=n.length;o>r;r++){var i=n[r];if(!this.isHidden(i)){var a=e.getCurrentStyle(i,"backgroundImage");if(-1!==a.indexOf("url")&&this.checkIsInFirstScreen(i)){var c=a.split(/\(|\)/g)[1];c=c.replace(/\"+/g,""),e.bindImgOnloadEvent(c)}}}},getTagImgList:function(){for(var e=this,n=t.getElementsByTagName("img"),r=0,o=n.length;o>r;r++)this.isHidden(n[r])||e.bindImgOnloadEvent(n[r])},isHidden:function(e){var t=this.getCurrentStyle(e,"display"),n=e.offsetWidth,r=e.offsetHeight;return"none"===t||!a.contains(e.ownerDocument,e)||0===n||0===r}},s={init:function(){a.on(e,"error",this.sendErrorInfo)},getErrorInfo:function(e){try{var t=e[0];return"string"==typeof t?[e[0],e[1],e[2],e[3],""]:[t.message,t.filename,t.lineno,t.colno,t.error?t.error.stack:""]}catch(n){return!1}},sendErrorInfo:function(){var e=s.getErrorInfo(arguments);if(e&&a.isArray(e)){var t={type:o.type.exception,message:encodeURIComponent(e[0]||""),filename:encodeURIComponent(e[1]||""),pos:[e[2]||0,e[3]||0],stack:encodeURIComponent(e[4]||"")};a.sendData(t,null)}}};try{n(o.type.performance)&&c.init(),n(o.type.exception)&&s.init()}catch(f){}return{sendData:a.sendData,sendErrorInfo:s.sendErrorInfo}}(window,document);